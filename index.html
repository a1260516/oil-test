æˆ‘ä¸ºæ‚¨è®¾è®¡äº†ä¸€ä¸ªå®Œæ•´çš„è®¾å¤‡æ¶¦æ»‘æ²¹åŒ–éªŒå‘¨æœŸæç¤ºæŠ¥è­¦Webåº”ç”¨æ–¹æ¡ˆã€‚è¿™ä¸ªæ–¹æ¡ˆä½¿ç”¨çº¯å‰ç«¯æŠ€æœ¯å®ç°ï¼Œæ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œé€‚åˆå•ä¸ªç”¨æˆ·ä½¿ç”¨ã€‚
å®Œæ•´ä»£ç å®ç°
<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>è®¾å¤‡æ¶¦æ»‘æ²¹åŒ–éªŒå‘¨æœŸæŠ¥è­¦ç³»ç»Ÿ</title> <style> :root { --primary-color: #1890ff; --warning-color: #faad14; --danger-color: #f5222d; --success-color: #52c41a; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f0f2f5; padding: 20px; } .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 24px; } h1 { text-align: center; margin-bottom: 24px; color: #262626; } .form-section { background: #fafafa; padding: 20px; border-radius: 6px; margin-bottom: 24px; } .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 16px; } .form-group { display: flex; flex-direction: column; } label { margin-bottom: 8px; font-weight: 500; color: #595959; } input, select { padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px; } .form-actions { display: flex; gap: 12px; justify-content: flex-end; } button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; transition: all 0.3s; } .btn-primary { background: var(--primary-color); color: white; } .btn-primary:hover { background: #40a9ff; } .btn-secondary { background: #f5f5f5; color: #595959; border: 1px solid #d9d9d9; } .alarm-settings { background: #fff7e6; padding: 16px; border-radius: 6px; margin: 16px 0; border-left: 4px solid var(--warning-color); } .alarm-settings h3 { margin-bottom: 12px; color: #d48806; } .setting-controls { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; } table { width: 100%; border-collapse: collapse; margin-top: 20px; } th, td { padding: 12px; text-align: left; border-bottom: 1px solid #f0f0f0; } th { background: #fafafa; font-weight: 600; color: #595959; } tr:hover { background: #fafafa; } .status-normal { color: var(--success-color); } .status-warning { color: var(--warning-color); font-weight: 600; animation: pulse 2s infinite; } .status-danger { color: var(--danger-color); font-weight: 600; animation: pulse 1s infinite; } @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } } .action-buttons { display: flex; gap: 8px; } .btn-sm { padding: 4px 8px; font-size: 12px; } .alarm-indicator { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 8px; } .alarm-normal { background: var(--success-color); } .alarm-warning { background: var(--warning-color); } .alarm-danger { background: var(--danger-color); } /* å“åº”å¼è®¾è®¡ */ @media (max-width: 768px) { .form-grid { grid-template-columns: 1fr; } table { font-size: 14px; } th, td { padding: 8px 4px; } } </style> </head> <body> <div class="container"> <h1>è®¾å¤‡æ¶¦æ»‘æ²¹åŒ–éªŒå‘¨æœŸæŠ¥è­¦ç³»ç»Ÿ</h1> <!-- æŠ¥è­¦è®¾ç½®åŒºåŸŸ --> <div class="alarm-settings"> <h3>æŠ¥è­¦è®¾ç½®</h3> <div class="setting-controls"> <div class="form-group"> <label for="alarmDays">æå‰æŠ¥è­¦å¤©æ•° (5-10å¤©)</label> <input type="number" id="alarmDays" min="5" max="10" value="7"> </div> <button id="saveSettings" class="btn-primary">ä¿å­˜è®¾ç½®</button> </div> </div> <!-- æ•°æ®å½•å…¥è¡¨å• --> <div class="form-section"> <h3>è®¾å¤‡ä¿¡æ¯å½•å…¥</h3> <form id="equipmentForm"> <div class="form-grid"> <div class="form-group"> <label for="branch">åˆ†å…¬å¸</label> <input type="text" id="branch" required> </div> <div class="form-group"> <label for="area">åŒºåŸŸ</label> <input type="text" id="area" required> </div> <div class="form-group"> <label for="workshop">è½¦é—´</label> <input type="text" id="workshop" required> </div> <div class="form-group"> <label for="equipmentName">è®¾å¤‡åç§°</label> <input type="text" id="equipmentName" required> </div> <div class="form-group"> <label for="oilCode">æ²¹å·</label> <input type="text" id="oilCode" required> </div> <div class="form-group"> <label for="lastTestDate">ä¸Šæ¬¡åŒ–éªŒæ—¥æœŸ</label> <input type="date" id="lastTestDate" required> </div> <div class="form-group"> <label for="testCycle">åŒ–éªŒå‘¨æœŸ</label> <select id="testCycle" required> <option value="3">3ä¸ªæœˆ</option> <option value="6">6ä¸ªæœˆ</option> <option value="12" selected>12ä¸ªæœˆ</option> </select> </div> </div> <div class="form-actions"> <button type="submit" class="btn-primary">æ·»åŠ è®¾å¤‡</button> <button type="reset" class="btn-secondary">é‡ç½®</button> </div> </form> </div> <!-- è®¾å¤‡åˆ—è¡¨ --> <div class="list-section"> <h3>è®¾å¤‡åˆ—è¡¨</h3> <table id="equipmentTable"> <thead> <tr> <th>çŠ¶æ€</th> <th>åˆ†å…¬å¸</th> <th>åŒºåŸŸ</th> <th>è½¦é—´</th> <th>è®¾å¤‡åç§°</th> <th>æ²¹å·</th> <th>ä¸Šæ¬¡åŒ–éªŒæ—¥æœŸ</th> <th>ä¸‹æ¬¡åŒ–éªŒæ—¥æœŸ</th> <th>åŒ–éªŒå‘¨æœŸ</th> <th>å‰©ä½™å¤©æ•°</th> <th>æ“ä½œ</th> </tr> </thead> <tbody id="equipmentList"> <!-- åŠ¨æ€å¡«å…… --> </tbody> </table> </div> </div> <script> // è®¾å¤‡æ•°æ®å­˜å‚¨ let equipmentData = JSON.parse(localStorage.getItem('equipmentData')) || []; let alarmDays = parseInt(localStorage.getItem('alarmDays')) || 7; // åˆå§‹åŒ– document.addEventListener('DOMContentLoaded', function() { // è®¾ç½®æŠ¥è­¦å¤©æ•° document.getElementById('alarmDays').value = alarmDays; // æ¸²æŸ“è®¾å¤‡åˆ—è¡¨ renderEquipmentList(); // è®¾ç½®è¡¨å•æäº¤äº‹ä»¶ document.getElementById('equipmentForm').addEventListener('submit', addEquipment); // è®¾ç½®æŠ¥è­¦å¤©æ•°ä¿å­˜äº‹ä»¶ document.getElementById('saveSettings').addEventListener('click', saveAlarmSettings); // è®¾ç½®å®šæ—¶æ£€æŸ¥æŠ¥è­¦ setInterval(checkAlarms, 60000); // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ checkAlarms(); // ç«‹å³æ£€æŸ¥ä¸€æ¬¡ }); // æ·»åŠ è®¾å¤‡ function addEquipment(e) { e.preventDefault(); const formData = { id: Date.now().toString(), branch: document.getElementById('branch').value, area: document.getElementById('area').value, workshop: document.getElementById('workshop').value, equipmentName: document.getElementById('equipmentName').value, oilCode: document.getElementById('oilCode').value, lastTestDate: document.getElementById('lastTestDate').value, testCycle: parseInt(document.getElementById('testCycle').value) }; // è®¡ç®—ä¸‹æ¬¡åŒ–éªŒæ—¥æœŸ const nextTestDate = calculateNextTestDate(formData.lastTestDate, formData.testCycle); formData.nextTestDate = nextTestDate; equipmentData.push(formData); saveToLocalStorage(); renderEquipmentList(); // é‡ç½®è¡¨å• document.getElementById('equipmentForm').reset(); // æ£€æŸ¥æŠ¥è­¦ checkAlarms(); } // è®¡ç®—ä¸‹æ¬¡åŒ–éªŒæ—¥æœŸ function calculateNextTestDate(lastTestDate, testCycle) { const date = new Date(lastTestDate); date.setMonth(date.getMonth() + testCycle); return date.toISOString().split('T')[0]; } // è®¡ç®—å‰©ä½™å¤©æ•° function calculateRemainingDays(nextTestDate) { const today = new Date(); const nextDate = new Date(nextTestDate); const diffTime = nextDate - today; const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); return diffDays; } // è·å–æŠ¥è­¦çŠ¶æ€ function getAlarmStatus(remainingDays) { if (remainingDays < 0) { return 'danger'; // è¶…æœŸ } else if (remainingDays <= alarmDays) { return 'warning'; // æŠ¥è­¦æœŸ } else { return 'normal'; // æ­£å¸¸ } } // æ¸²æŸ“è®¾å¤‡åˆ—è¡¨ function renderEquipmentList() { const tbody = document.getElementById('equipmentList'); tbody.innerHTML = ''; equipmentData.forEach(item => { const remainingDays = calculateRemainingDays(item.nextTestDate); const status = getAlarmStatus(remainingDays); const row = document.createElement('tr'); row.innerHTML = ` <td> <span class="alarm-indicator alarm-${status}"></span> <span class="status-${status}"> ${status === 'normal' ? 'æ­£å¸¸' : status === 'warning' ? 'æŠ¥è­¦' : 'è¶…æœŸ'} </span> </td> <td>${item.branch}</td> <td>${item.area}</td> <td>${item.workshop}</td> <td>${item.equipmentName}</td> <td>${item.oilCode}</td> <td>${formatDate(item.lastTestDate)}</td> <td>${formatDate(item.nextTestDate)}</td> <td>${item.testCycle}ä¸ªæœˆ</td> <td class="status-${status}">${remainingDays}å¤©</td> <td class="action-buttons"> <button class="btn-sm btn-primary" onclick="editEquipment('${item.id}')">ç¼–è¾‘</button> <button class="btn-sm btn-secondary" onclick="deleteEquipment('${item.id}')">åˆ é™¤</button> <button class="btn-sm btn-primary" onclick="markAsTested('${item.id}')">æ ‡è®°å·²åŒ–éªŒ</button> </td> `; // æ ¹æ®çŠ¶æ€è®¾ç½®è¡ŒèƒŒæ™¯è‰² if (status === 'danger') { row.style.backgroundColor = '#fff2f0'; } else if (status === 'warning') { row.style.backgroundColor = '#fffbe6'; } tbody.appendChild(row); }); } // æ—¥æœŸæ ¼å¼åŒ– function formatDate(dateString) { const date = new Date(dateString); return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`; } // åˆ é™¤è®¾å¤‡ function deleteEquipment(id) { if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®¾å¤‡è®°å½•å—ï¼Ÿ')) { equipmentData = equipmentData.filter(item => item.id !== id); saveToLocalStorage(); renderEquipmentList(); } } // æ ‡è®°ä¸ºå·²åŒ–éªŒ function markAsTested(id) { const equipment = equipmentData.find(item => item.id === id); if (equipment) { const newLastTestDate = new Date().toISOString().split('T')[0]; equipment.lastTestDate = newLastTestDate; equipment.nextTestDate = calculateNextTestDate(newLastTestDate, equipment.testCycle); saveToLocalStorage(); renderEquipmentList(); checkAlarms(); alert('å·²æ›´æ–°åŒ–éªŒæ—¥æœŸï¼'); } } // ç¼–è¾‘è®¾å¤‡ï¼ˆç®€åŒ–ç‰ˆï¼‰ function editEquipment(id) { const equipment = equipmentData.find(item => item.id === id); if (equipment) { // å¡«å……è¡¨å• document.getElementById('branch').value = equipment.branch; document.getElementById('area').value = equipment.area; document.getElementById('workshop').value = equipment.workshop; document.getElementById('equipmentName').value = equipment.equipmentName; document.getElementById('oilCode').value = equipment.oilCode; document.getElementById('lastTestDate').value = equipment.lastTestDate; document.getElementById('testCycle').value = equipment.testCycle; // åˆ é™¤åŸè®°å½• deleteEquipment(id); // æ»šåŠ¨åˆ°è¡¨å• document.getElementById('equipmentForm').scrollIntoView(); } } // ä¿å­˜æŠ¥è­¦è®¾ç½® function saveAlarmSettings() { const newAlarmDays = parseInt(document.getElementById('alarmDays').value); if (newAlarmDays >= 5 && newAlarmDays <= 10) { alarmDays = newAlarmDays; localStorage.setItem('alarmDays', alarmDays); renderEquipmentList(); alert('æŠ¥è­¦è®¾ç½®å·²ä¿å­˜ï¼'); } else { alert('æŠ¥è­¦å¤©æ•°å¿…é¡»åœ¨5-10å¤©èŒƒå›´å†…ï¼'); } } // æ£€æŸ¥æŠ¥è­¦ function checkAlarms() { const now = new Date(); const currentHour = now.getHours(); const currentMinute = now.getMinutes(); // åªåœ¨å·¥ä½œæ—¶é—´æ£€æŸ¥ï¼ˆ9:00-17:00ï¼‰ if (currentHour >= 9 && currentHour < 17) { equipmentData.forEach(item => { const remainingDays = calculateRemainingDays(item.nextTestDate); const status = getAlarmStatus(remainingDays); if (status === 'danger' || status === 'warning') { showBrowserNotification(item, remainingDays, status); } }); } } // æ˜¾ç¤ºæµè§ˆå™¨é€šçŸ¥ function showBrowserNotification(equipment, remainingDays, status) { if (!("Notification" in window)) { return; } if (Notification.permission === "granted") { createNotification(equipment, remainingDays, status); } else if (Notification.permission !== "denied") { Notification.requestPermission().then(permission => { if (permission === "granted") { createNotification(equipment, remainingDays, status); } }); } } function createNotification(equipment, remainingDays, status) { const title = status === 'danger' ? ' æ¶¦æ»‘æ²¹åŒ–éªŒè¶…æœŸæŠ¥è­¦' : 'ğŸŸ¡ æ¶¦æ»‘æ²¹åŒ–éªŒå³å°†åˆ°æœŸ'; const message = status === 'danger' ? `${equipment.equipmentName} å·²è¶…æœŸ ${Math.abs(remainingDays)} å¤©ï¼` : `${equipment.equipmentName} è¿˜æœ‰ ${remainingDays} å¤©åˆ°æœŸ`; new Notification(title, { body: `${equipment.branch} - ${equipment.area} - ${message}`, icon: '/favicon.ico', tag: equipment.id // é˜²æ­¢é‡å¤é€šçŸ¥ }); } // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ function saveToLocalStorage() { localStorage.setItem('equipmentData', JSON.stringify(equipmentData)); } // è¯·æ±‚é€šçŸ¥æƒé™ if ("Notification" in window) { Notification.requestPermission(); } </script> </body> </html> 
éƒ¨ç½²è¯´æ˜
æ–¹æ³•ä¸€ï¼šç›´æ¥ä½¿ç”¨ï¼ˆæœ¬åœ°æ–‡ä»¶ï¼‰
å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º index.html æ–‡ä»¶ 
ç”¨æµè§ˆå™¨ç›´æ¥æ‰“å¼€è¯¥æ–‡ä»¶å³å¯ä½¿ç”¨ 
æ–¹æ³•äºŒï¼šWebæœåŠ¡å™¨éƒ¨ç½²
å°†ä»£ç ä¿å­˜ä¸º index.html 
ä¸Šä¼ åˆ°ä»»æ„WebæœåŠ¡å™¨ï¼ˆå¦‚Nginxã€Apacheï¼‰ 
é€šè¿‡ç½‘å€è®¿é—®ï¼Œä¾‹å¦‚ï¼šhttp://yourserver.com/oil-alarm-system 
åŠŸèƒ½ç‰¹ç‚¹
âœ… æ ¸å¿ƒåŠŸèƒ½
æ•°æ®å½•å…¥ï¼šå®Œæ•´è®°å½•è®¾å¤‡æ¶¦æ»‘æ²¹åŒ–éªŒä¿¡æ¯ 
æ™ºèƒ½æŠ¥è­¦ï¼šæ”¯æŒ5-10å¤©æå‰æŠ¥è­¦è®¾ç½® 
çŠ¶æ€å¯è§†åŒ–ï¼šé¢œè‰²åŒºåˆ†æ­£å¸¸ã€æŠ¥è­¦ã€è¶…æœŸçŠ¶æ€ 
æµè§ˆå™¨é€šçŸ¥ï¼šå·¥ä½œæ—¶é—´è‡ªåŠ¨æ¨é€æŠ¥è­¦ä¿¡æ¯ 
âœ… æ•°æ®ç®¡ç†
æœ¬åœ°å­˜å‚¨ï¼šä½¿ç”¨æµè§ˆå™¨localStorageæŒä¹…åŒ–æ•°æ® 
å®Œæ•´CRUDï¼šæ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€æ ‡è®°å·²åŒ–éªŒ 
å“åº”å¼è®¾è®¡ï¼šé€‚é…æ‰‹æœºå’Œç”µè„‘æµè§ˆå™¨ 
âœ… æŠ¥è­¦æœºåˆ¶
ä¸‰çº§æŠ¥è­¦ï¼šæ­£å¸¸ï¼ˆç»¿è‰²ï¼‰ã€é¢„è­¦ï¼ˆé»„è‰²ï¼‰ã€è¶…æœŸï¼ˆçº¢è‰²ï¼‰ 
çµæ´»è®¾ç½®ï¼šæŠ¥è­¦å¤©æ•°å¯é…ç½®ï¼ˆ5-10å¤©ï¼‰ 
è‡ªåŠ¨è®¡ç®—ï¼šè‡ªåŠ¨è®¡ç®—ä¸‹æ¬¡åŒ–éªŒæ—¥æœŸå’Œå‰©ä½™å¤©æ•° 
ä½¿ç”¨è¯´æ˜
é¦–æ¬¡ä½¿ç”¨ï¼šè®¾ç½®æŠ¥è­¦å¤©æ•°ï¼ˆé»˜è®¤7å¤©ï¼‰ 
æ·»åŠ è®¾å¤‡ï¼šå¡«å†™å®Œæ•´çš„è®¾å¤‡ä¿¡æ¯è¡¨å• 
æŸ¥çœ‹çŠ¶æ€ï¼šåˆ—è¡¨é¡µé¢æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡æŠ¥è­¦çŠ¶æ€ 
æ—¥å¸¸ç»´æŠ¤ï¼šåŒ–éªŒå®Œæˆåç‚¹å‡»"æ ‡è®°å·²åŒ–éªŒ"æ›´æ–°æ—¥æœŸ 
æŠ€æœ¯æ¶æ„
å‰ç«¯ï¼šçº¯HTML5 + CSS3 + JavaScript 
å­˜å‚¨ï¼šæµè§ˆå™¨localStorage 
é€šçŸ¥ï¼šHTML5 Notification API 
å“åº”å¼ï¼šCSS Grid + Flexboxå¸ƒå±€ 
è¿™ä¸ªæ–¹æ¡ˆå®Œå…¨æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœéœ€è¦å¤šç”¨æˆ·æˆ–äº‘ç«¯å­˜å‚¨ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ åç«¯æ”¯æŒã€‚

